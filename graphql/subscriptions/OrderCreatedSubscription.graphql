fragment OrderLineFragment on OrderLine {
  productSku
  productName
  quantity
  variant {
    id
    product {
      chargeTaxes
      metafield(key: "avatax_tax_code")
      productType {
        metafield(key: "avatax_tax_code")
      }
    }
  }
  totalPrice {
    net {
      amount
    }
    gross {
      amount
    }
  }
}

fragment OrderSubscription on Order {
  id
  number
  created
  channel {
    id
    slug
  }
  shippingAddress {
    ...AddressFragment
  }
  billingAddress {
    ...AddressFragment
  }
  discounts {
    amount {
      amount
    }
  }
  total {
    currency
    net {
      amount
    }
    tax {
      amount
    }
  }
  shippingPrice {
    gross {
      amount
    }
  }
  lines {
    ...OrderLineFragment
  }
}
fragment OrderCreatedEventSubscription on Event {
  __typename
  ... on OrderCreated {
    order {
      ...OrderSubscription
    }
  }
}
subscription OrderCreatedSubscription {
  event {
    ...OrderCreatedEventSubscription
  }
}
