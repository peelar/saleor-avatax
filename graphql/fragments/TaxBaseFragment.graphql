fragment TaxBaseLineSubscripton on TaxableObjectLine {
  chargeTaxes
  sourceLine {
    __typename
    ... on CheckoutLine {
      id
      productVariant: variant {
        id
        sku
        name
        product {
          metafield(key: "avatax_tax_code")
          productType {
            metafield(key: "avatax_tax_code")
          }
        }
      }
    }
    ... on OrderLine {
      id
      productSku
      productName
      variant {
        id
        product {
          metafield(key: "avatax_tax_code")
          productType {
            metafield(key: "avatax_tax_code")
          }
        }
      }
    }
  }
  quantity
  totalPrice {
    amount
  }
}
fragment TaxDiscountSubscription on TaxableObjectDiscount {
  name
  amount {
    amount
  }
}

fragment TaxBaseSubscription on TaxableObject {
  currency
  channel {
    slug
  }
  pricesEnteredWithTax
  sourceObject{
    __typename
    ... on Order{
      id
      date: updatedAt
    }
    ... on Checkout{
      id
      date: lastChange
    }
  }
  discounts {
    ...TaxDiscountSubscription
  }
  address {
    streetAddress1
    streetAddress2
    city
    country {
      code
    }
    countryArea
    postalCode
  }
  shippingPrice {
    amount
  }
  lines {
    ...TaxBaseLineSubscripton
  }
}
