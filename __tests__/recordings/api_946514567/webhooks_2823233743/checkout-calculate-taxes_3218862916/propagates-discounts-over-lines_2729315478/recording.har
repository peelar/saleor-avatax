{
  "log": {
    "_recordingName": "api/webhooks/checkout-calculate-taxes/propagates discounts over lines",
    "creator": {
      "comment": "persister:fs",
      "name": "Polly.JS",
      "version": "6.0.5"
    },
    "entries": [
      {
        "_id": "79f25527d4bdf5fce81ab38c51821304",
        "_order": 0,
        "cache": {},
        "request": {
          "bodySize": 211,
          "cookies": [],
          "headers": [
            {
              "_fromType": "array",
              "name": "content-type",
              "value": "application/json"
            },
            {
              "_fromType": "array",
              "name": "accept",
              "value": "*/*"
            },
            {
              "_fromType": "array",
              "name": "content-length",
              "value": "211"
            },
            {
              "_fromType": "array",
              "name": "user-agent",
              "value": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"
            },
            {
              "_fromType": "array",
              "name": "accept-encoding",
              "value": "gzip,deflate"
            },
            {
              "_fromType": "array",
              "name": "connection",
              "value": "close"
            },
            {
              "name": "host",
              "value": "localhost:8000"
            }
          ],
          "headersSize": 308,
          "httpVersion": "HTTP/1.1",
          "method": "POST",
          "postData": {
            "mimeType": "application/json",
            "params": [],
            "text": "{\"query\":\"query FetchAppMetafields($keys: [String!]) {\\n  app {\\n    id\\n    privateMetafields(keys: $keys)\\n    __typename\\n  }\\n}\",\"operationName\":\"FetchAppMetafields\",\"variables\":{\"keys\":[\"default-channel\"]}}"
          },
          "queryString": [],
          "url": "http://localhost:8000/graphql/"
        },
        "response": {
          "bodySize": 773,
          "content": {
            "mimeType": "application/json",
            "size": 773,
            "text": "{\"data\":{\"app\":{\"id\":\"QXBwOjEz\",\"privateMetafields\":{\"default-channel\":\"{\\\"shipFromCountry\\\":{\\\"encrypted\\\":false,\\\"value\\\":\\\"PL\\\"},\\\"shipFromZip\\\":{\\\"encrypted\\\":false,\\\"value\\\":\\\"53-601\\\"},\\\"shipFromCity\\\":{\\\"encrypted\\\":false,\\\"value\\\":\\\"Wroclaw\\\"},\\\"shipFromStreet\\\":{\\\"encrypted\\\":false,\\\"value\\\":\\\"Teczowa 7\\\"},\\\"shipFromState\\\":{\\\"encrypted\\\":false,\\\"value\\\":\\\"\\\"},\\\"account\\\":{\\\"encrypted\\\":false,\\\"value\\\":\\\"123456\\\"},\\\"password\\\":{\\\"encrypted\\\":true,\\\"value\\\":\\\"U2FsdGVkX1+vwewxrCWG98Hnr8Qx/MXEZfUmS6IQEIM=\\\"},\\\"companyCode\\\":{\\\"encrypted\\\":false,\\\"value\\\":\\\"DEFAULT\\\"},\\\"active\\\":{\\\"encrypted\\\":false,\\\"value\\\":true},\\\"sandbox\\\":{\\\"encrypted\\\":false,\\\"value\\\":true}}\"},\"__typename\":\"App\"}},\"extensions\":{\"cost\":{\"requestedQueryCost\":1,\"maximumAvailable\":50000}}}"
          },
          "cookies": [],
          "headers": [
            {
              "name": "date",
              "value": "Wed, 31 Aug 2022 12:12:27 GMT"
            },
            {
              "name": "server",
              "value": "WSGIServer/0.2 CPython/3.9.6"
            },
            {
              "name": "content-type",
              "value": "application/json"
            },
            {
              "name": "content-length",
              "value": "811"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "referrer-policy",
              "value": "same-origin"
            }
          ],
          "headersSize": 193,
          "httpVersion": "HTTP/1.1",
          "redirectURL": "",
          "status": 200,
          "statusText": "OK"
        },
        "startedDateTime": "2022-08-31T12:12:26.946Z",
        "time": 191,
        "timings": {
          "blocked": -1,
          "connect": -1,
          "dns": -1,
          "receive": 0,
          "send": 0,
          "ssl": -1,
          "wait": 191
        }
      },
      {
        "_id": "5f34925dd18291a11fd430d9542349c7",
        "_order": 0,
        "cache": {},
        "request": {
          "bodySize": 846,
          "cookies": [],
          "headers": [
            {
              "_fromType": "array",
              "name": "accept",
              "value": "application/json"
            },
            {
              "_fromType": "array",
              "name": "content-type",
              "value": "application/json"
            },
            {
              "_fromType": "array",
              "name": "x-avalara-client",
              "value": "Saleor; 1.0; JavascriptSdk; 22.7.0; Saleor-Avatax"
            },
            {
              "_fromType": "array",
              "name": "content-length",
              "value": "846"
            },
            {
              "_fromType": "array",
              "name": "user-agent",
              "value": "node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"
            },
            {
              "_fromType": "array",
              "name": "accept-encoding",
              "value": "gzip,deflate"
            },
            {
              "_fromType": "array",
              "name": "connection",
              "value": "close"
            },
            {
              "name": "host",
              "value": "sandbox-rest.avatax.com"
            }
          ],
          "headersSize": 432,
          "httpVersion": "HTTP/1.1",
          "method": "POST",
          "postData": {
            "mimeType": "application/json",
            "params": [],
            "text": "{\"type\":0,\"companyCode\":\"DEFAULT\",\"code\":\"\",\"date\":\"2022-08-31T07:10:25.385Z\",\"customerCode\":\"0\",\"discount\":3,\"commit\":false,\"currencyCode\":\"USD\",\"lines\":[{\"number\":\"0\",\"quantity\":3,\"amount\":60,\"itemCode\":\"328223580\",\"taxCode\":\"O9999999\",\"description\":\"S\",\"taxIncluded\":true,\"discounted\":true},{\"number\":\"1\",\"quantity\":3,\"amount\":20,\"itemCode\":\"328223580\",\"taxCode\":\"O9999999\",\"description\":\"S\",\"taxIncluded\":true,\"discounted\":true},{\"number\":\"\",\"quantity\":1,\"amount\":12.3,\"itemCode\":\"Shipping\",\"taxCode\":\"FR000000\",\"description\":\"\",\"taxIncluded\":true,\"discounted\":true}],\"addresses\":{\"shipTo\":{\"line1\":\"Teczowa 777\",\"line2\":\"\",\"line3\":\"\",\"city\":\"Wroclaw\",\"region\":\"\",\"country\":\"PL\",\"postalCode\":\"53-601\",\"locationCode\":\"\"},\"shipFrom\":{\"line1\":\"Teczowa 7\",\"line2\":\"\",\"line3\":\"\",\"city\":\"Wroclaw\",\"region\":\"\",\"country\":\"PL\",\"postalCode\":\"53-601\"}}}"
          },
          "queryString": [],
          "url": "https://sandbox-rest.avatax.com/api/v2/transactions/create"
        },
        "response": {
          "bodySize": 5199,
          "content": {
            "mimeType": "application/json; charset=utf-8",
            "size": 5199,
            "text": "{\"id\":0,\"code\":\"7168a2b8-fed8-4b7c-b096-c95546c76c48\",\"companyId\":7799660,\"date\":\"2022-08-31\",\"paymentDate\":\"2022-08-31\",\"status\":\"Temporary\",\"type\":\"SalesOrder\",\"batchCode\":\"\",\"currencyCode\":\"USD\",\"exchangeRateCurrencyCode\":\"USD\",\"customerUsageType\":\"\",\"entityUseCode\":\"\",\"customerVendorCode\":\"0\",\"customerCode\":\"0\",\"exemptNo\":\"\",\"reconciled\":false,\"locationCode\":\"\",\"reportingLocationCode\":\"\",\"purchaseOrderNo\":\"\",\"referenceCode\":\"\",\"salespersonCode\":\"\",\"totalAmount\":75.6,\"totalExempt\":0.0,\"totalDiscount\":3.0,\"totalTax\":16.7,\"totalTaxable\":72.6,\"totalTaxCalculated\":16.7,\"adjustmentReason\":\"NotAdjusted\",\"locked\":false,\"version\":1,\"exchangeRateEffectiveDate\":\"2022-08-31\",\"exchangeRate\":1.0,\"modifiedDate\":\"2022-08-31T12:12:27.4868004Z\",\"modifiedUserId\":6479978,\"taxDate\":\"2022-08-31\",\"lines\":[{\"id\":0,\"transactionId\":0,\"lineNumber\":\"0\",\"customerUsageType\":\"\",\"entityUseCode\":\"\",\"description\":\"S\",\"discountAmount\":1.95,\"exemptAmount\":0.0,\"exemptCertId\":0,\"exemptNo\":\"\",\"isItemTaxable\":true,\"itemCode\":\"328223580\",\"lineAmount\":49.1500,\"quantity\":3.0,\"ref1\":\"\",\"ref2\":\"\",\"reportingDate\":\"2022-08-31\",\"tax\":10.85,\"taxableAmount\":47.2,\"taxCalculated\":10.85,\"taxCode\":\"O9999999\",\"taxCodeId\":9111,\"taxDate\":\"2022-08-31\",\"taxIncluded\":true,\"details\":[{\"id\":0,\"transactionLineId\":0,\"transactionId\":0,\"country\":\"PL\",\"region\":\"PL\",\"exemptAmount\":0.0,\"jurisCode\":\"PL\",\"jurisName\":\"POLAND\",\"stateAssignedNo\":\"\",\"jurisType\":\"CNT\",\"jurisdictionType\":\"Country\",\"nonTaxableAmount\":0.0,\"rate\":0.230000,\"tax\":10.85,\"taxableAmount\":47.2,\"taxType\":\"Output\",\"taxSubTypeId\":\"O\",\"taxName\":\"Standard Rate\",\"taxAuthorityTypeId\":45,\"taxCalculated\":10.85,\"rateType\":\"Standard\",\"rateTypeCode\":\"S\",\"unitOfBasis\":\"PerCurrencyUnit\",\"isNonPassThru\":false,\"isFee\":false,\"reportingTaxableUnits\":47.2,\"reportingNonTaxableUnits\":0.0,\"reportingExemptUnits\":0.0,\"reportingTax\":10.85,\"reportingTaxCalculated\":10.85,\"liabilityType\":\"Seller\"}],\"nonPassthroughDetails\":[],\"hsCode\":\"\",\"costInsuranceFreight\":0.0,\"vatCode\":\"PLS-230C\",\"vatNumberTypeId\":0},{\"id\":0,\"transactionId\":0,\"lineNumber\":\"1\",\"customerUsageType\":\"\",\"entityUseCode\":\"\",\"description\":\"S\",\"discountAmount\":0.65,\"exemptAmount\":0.0,\"exemptCertId\":0,\"exemptNo\":\"\",\"isItemTaxable\":true,\"itemCode\":\"328223580\",\"lineAmount\":16.3800,\"quantity\":3.0,\"ref1\":\"\",\"ref2\":\"\",\"reportingDate\":\"2022-08-31\",\"tax\":3.62,\"taxableAmount\":15.73,\"taxCalculated\":3.62,\"taxCode\":\"O9999999\",\"taxCodeId\":9111,\"taxDate\":\"2022-08-31\",\"taxIncluded\":true,\"details\":[{\"id\":0,\"transactionLineId\":0,\"transactionId\":0,\"country\":\"PL\",\"region\":\"PL\",\"exemptAmount\":0.0,\"jurisCode\":\"PL\",\"jurisName\":\"POLAND\",\"stateAssignedNo\":\"\",\"jurisType\":\"CNT\",\"jurisdictionType\":\"Country\",\"nonTaxableAmount\":0.0,\"rate\":0.230000,\"tax\":3.62,\"taxableAmount\":15.73,\"taxType\":\"Output\",\"taxSubTypeId\":\"O\",\"taxName\":\"Standard Rate\",\"taxAuthorityTypeId\":45,\"taxCalculated\":3.62,\"rateType\":\"Standard\",\"rateTypeCode\":\"S\",\"unitOfBasis\":\"PerCurrencyUnit\",\"isNonPassThru\":false,\"isFee\":false,\"reportingTaxableUnits\":15.73,\"reportingNonTaxableUnits\":0.0,\"reportingExemptUnits\":0.0,\"reportingTax\":3.62,\"reportingTaxCalculated\":3.62,\"liabilityType\":\"Seller\"}],\"nonPassthroughDetails\":[],\"hsCode\":\"\",\"costInsuranceFreight\":0.0,\"vatCode\":\"PLS-230C\",\"vatNumberTypeId\":0},{\"id\":0,\"transactionId\":0,\"lineNumber\":\"2\",\"customerUsageType\":\"\",\"entityUseCode\":\"\",\"description\":\"\",\"discountAmount\":0.4,\"exemptAmount\":0.0,\"exemptCertId\":0,\"exemptNo\":\"\",\"isItemTaxable\":true,\"itemCode\":\"Shipping\",\"lineAmount\":10.0700,\"quantity\":1.0,\"ref1\":\"\",\"ref2\":\"\",\"reportingDate\":\"2022-08-31\",\"tax\":2.23,\"taxableAmount\":9.67,\"taxCalculated\":2.23,\"taxCode\":\"FR000000\",\"taxCodeId\":8550,\"taxDate\":\"2022-08-31\",\"taxIncluded\":true,\"details\":[{\"id\":0,\"transactionLineId\":0,\"transactionId\":0,\"country\":\"PL\",\"region\":\"PL\",\"exemptAmount\":0.0,\"jurisCode\":\"PL\",\"jurisName\":\"POLAND\",\"stateAssignedNo\":\"\",\"jurisType\":\"CNT\",\"jurisdictionType\":\"Country\",\"nonTaxableAmount\":0.0,\"rate\":0.230000,\"tax\":2.23,\"taxableAmount\":9.67,\"taxType\":\"Output\",\"taxSubTypeId\":\"O\",\"taxName\":\"Standard Rate\",\"taxAuthorityTypeId\":45,\"taxCalculated\":2.23,\"rateType\":\"Standard\",\"rateTypeCode\":\"S\",\"unitOfBasis\":\"PerCurrencyUnit\",\"isNonPassThru\":false,\"isFee\":false,\"reportingTaxableUnits\":9.67,\"reportingNonTaxableUnits\":0.0,\"reportingExemptUnits\":0.0,\"reportingTax\":2.23,\"reportingTaxCalculated\":2.23,\"liabilityType\":\"Seller\"}],\"nonPassthroughDetails\":[],\"hsCode\":\"\",\"costInsuranceFreight\":0.0,\"vatCode\":\"PLS-230D\",\"vatNumberTypeId\":0}],\"addresses\":[{\"id\":0,\"transactionId\":0,\"boundaryLevel\":\"Zip5\",\"line1\":\"Teczowa 777\",\"line2\":\"\",\"line3\":\"\",\"city\":\"Wroclaw\",\"region\":\"\",\"postalCode\":\"53-601\",\"country\":\"PL\",\"taxRegionId\":205102,\"latitude\":\"\",\"longitude\":\"\"},{\"id\":0,\"transactionId\":0,\"boundaryLevel\":\"Zip5\",\"line1\":\"Teczowa 7\",\"line2\":\"\",\"line3\":\"\",\"city\":\"Wroclaw\",\"region\":\"\",\"postalCode\":\"53-601\",\"country\":\"PL\",\"taxRegionId\":205102,\"latitude\":\"\",\"longitude\":\"\"}],\"summary\":[{\"country\":\"PL\",\"region\":\"PL\",\"jurisType\":\"Country\",\"jurisCode\":\"PL\",\"jurisName\":\"POLAND\",\"taxAuthorityType\":45,\"stateAssignedNo\":\"\",\"taxType\":\"Output\",\"taxSubType\":\"O\",\"taxName\":\"Standard Rate\",\"rateType\":\"Standard\",\"taxable\":72.60,\"rate\":0.230000,\"tax\":16.70,\"taxCalculated\":16.70,\"nonTaxable\":0.0,\"exemption\":0.0}]}"
          },
          "cookies": [],
          "headers": [
            {
              "name": "date",
              "value": "Wed, 31 Aug 2022 12:12:27 GMT"
            },
            {
              "name": "content-type",
              "value": "application/json; charset=utf-8"
            },
            {
              "name": "transfer-encoding",
              "value": "chunked"
            },
            {
              "name": "connection",
              "value": "close"
            },
            {
              "name": "cache-control",
              "value": "private, no-cache, no-store"
            },
            {
              "name": "location",
              "value": "/api/v2/companies/7799660/transactions/0"
            },
            {
              "name": "strict-transport-security",
              "value": "max-age=31536000; includeSubdomains"
            },
            {
              "name": "x-content-type-options",
              "value": "nosniff"
            },
            {
              "name": "x-frame-options",
              "value": "sameorigin"
            },
            {
              "name": "x-xss-protection",
              "value": "1; mode=block"
            },
            {
              "name": "referrer-policy",
              "value": "same-origin"
            },
            {
              "name": "x-permitted-cross-domain-policies",
              "value": "none"
            },
            {
              "name": "serverduration",
              "value": "00:00:00.0278081"
            },
            {
              "name": "api-supported-versions",
              "value": "2.0"
            },
            {
              "name": "x-correlation-id",
              "value": "142cd7cc-b8b7-45b7-b5f9-c5f5e2fc15e2"
            },
            {
              "name": "x-avalara-uid",
              "value": "142cd7cc-b8b7-45b7-b5f9-c5f5e2fc15e2"
            }
          ],
          "headersSize": 631,
          "httpVersion": "HTTP/1.1",
          "redirectURL": "/api/v2/companies/7799660/transactions/0",
          "status": 201,
          "statusText": "Created"
        },
        "startedDateTime": "2022-08-31T12:12:27.142Z",
        "time": 1018,
        "timings": {
          "blocked": -1,
          "connect": -1,
          "dns": -1,
          "receive": 0,
          "send": 0,
          "ssl": -1,
          "wait": 1018
        }
      }
    ],
    "pages": [],
    "version": "1.2"
  }
}
